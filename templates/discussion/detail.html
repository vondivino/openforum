{% extends 'base.html' %}
{% load crispy_forms_tags %}


{% block title %}{{ discussion.title }}{% endblock title %}

{% block content %} 
    <div class="content">
        <div class="columns">
            <div class="column is-three-fifths">
                <div class="section">
                    <h1 class="title mb-6">
                      {{ discussion.title|title }}
                      <span class="tag is-primary">{{ discussion.forum.name }}</span>
                    </h1>
                    
                    <h4 class="subtitle is-6">
                        by {{ discussion.author}} | {{ discussion.date }}
                    </h2>
                    <p>
                        {{ discussion.body }}
                    </p>
                </div>
                <div class="section has-background-white-ter">
                    <div class="columns">
                        <div class="column">
                            <h4 class="subtitle">All Comments</h4>
                        </div>
                        <div class="column">
                            <a class="button is-success is-light" 
                            href="{% url 'comment-add' discussion.slug %}">+ Add Comment</a>
                        </div>
                    </div>
                    {% for comment in discussion.comment_set.all %}
                        <div class="card mb-4">
                            <div class="card-content">
                                <p class="title is-6 mb-6">{{ comment.body }}</p>
                                <p class="subtitle is-6">
                                    by {{ comment.author }} | {{ comment.date }}
                                </p>
                                {% if user.is_authenticated and comment.author == user %}
                                <footer class="card-footer">
                                    <a href="#" class="card-footer-item">Edit</a>
                                    <a href="#" class="card-footer-item">Delete</a>
                                </footer>
                                {% endif %}
                            </div>
                        </div>
                    {% empty %}
                        <p>No comments available.</p>
                    {% endfor %}
                </div>
            </div>
            <div class="column">
                adassdds
            </div>
        </div>

    </div>
    
{% endblock content %}